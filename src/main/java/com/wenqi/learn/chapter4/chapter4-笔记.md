## item17 - 不可变类

类不可变原则：

1. 不要提供修改队形状态的方法
2. 确保类不能被继承
3. 所有属性用final修饰
4. 所有属性设置为私有private
5. 确保对任何可变组件的独占访问

不可变对象本质上是**线程安全**的，它们不需要同步，它们不会因为多线程并发访问而损坏。

**不可变对象自带提供故障原子性**。他们的状态从未改变，所以不可能出现暂时的不一致。

> 关于可序列化性，应该提出一个警告。如果你选择让不可变类实现 `Serializable`，并且该类包含一个或多个引用可变对象的字段，那么你必须提供一个显式的 `readObject` 或 `readResolve` 方法，或者使用 `ObjectOutputStream.writeUnshared` 或 `ObjectInputStream.readUnshared` 方法，即使默认的序列化形式是可以接受的。否则攻击者可能创建类的可变实例。

## Item19 - 继承

- 正常类的加载顺序：静态变量/静态代码块 -> main方法 -> 非静态变量/代码块 -> 构造方法
- 父类–静态变量/父类–静态初始化块
  子类–静态变量/子类–静态初始化块
  父类–变量/父类–初始化块
  父类–构造器
  子类–变量/子类–初始化块
  子类–构造器

**说明：**静态代码块与静态变量的执行顺序同代码定义的顺序；非静态变量与代码块的执行顺序同代码执行顺序。



父类构造函数中调用了子类可重写的方法，将会引发NullPointerException。

注意，从构造函数调用私有方法、最终方法和静态方法是安全的，它们都是不可覆盖的。







